{% extends 'sidenav.html.twig' %}

{% block titleSidenav %}

{% endblock %}

{% block stylesheetsSidenav %}
    {{ encore_entry_link_tags('sidenav') }}
    {{ encore_entry_link_tags('presentation') }}
    {{ encore_entry_link_tags('cards') }}
    {{ encore_entry_link_tags('sidenav') }}
{% endblock %}

{% block javascriptsSidenav %}

{% endblock %}

{% block sideNav %}

{% endblock %}

{% block body %}

    {% block titleBody %}

    {% endblock %}
    <div class="col">
        <a href="/" class="btn btn-outline-secondary">Retour <i class="fas fa-chevron-left"></i></a>
    </div>
    <div class="container-fluid">
        <div class="col-6 infoPresentation">
            <div class="card ">
                <div class="card-body">
                    {% block PresentationCardBody %}

                    {% endblock %}
                </div>
            </div>
        </div>
    </div>

    {% block titleChild %}

    {% endblock %}

    {% block Child %}
        <div class="encadrementChild">
            <div class="row">
                {% block ChildContent %}

                {% endblock %}
            </div>
        </div>
    {% endblock %}


    <h1 class="title" id="acceswan">{{ Sigle['accesWan'] }}</h1>

    {% if AccesWan %}
        <div class="row">
            {% for AccesWan in AccesWan %}
                <div class="col-6" id="entity-{{ AccesWan.IdOpera }}">
                    <div class="card">
                        <div class="card-body Entity-card">
                            <div class="card-content">
                                <h3 class="card-title">
                                    {{ AccesWan.IdAccess }}
                                    <div class="form-check" style="font-size: larger">
                                        <label for="checkbox{{ AccesWan.idOpera }}"></label>
                                        <input form="bnrFormDelete" class="form-check-input checkboxAffaire" name="idChecked{{ AccesWan.idOpera }}" type="checkbox" value="{{ AccesWan.idOpera }}" id="checkbox{{ AccesWan.idOpera }}">
                                    </div>
                                </h3>
                                <h4 class="card-subtitle mb-2 text-muted">
                                    {% if AccesWan.debitOpera != '' %}
                                        <p>{{ AccesWan.debitOpera }} Mb/s</p>
                                    {% else %}
                                        Pas de débit renseigné
                                    {% endif %}
                                </h4>
                                <p class="card-text">
                                    <span class="label">Coût mensuel :</span>
                                        {% if AccesWan.coutMensuel != '' %}
                                            {{ AccesWan.coutMensuel }} euros
                                        {% else %}
                                            pas de coût mensuel renseigné
                                        {% endif %}
                                    <br>
                                    <span class="label">Origine :</span>
                                        {% if AccesWan.origine != '' %}
                                            {{ AccesWan.origine }}
                                        {% else %}
                                            pas d'origine renseignée
                                        {% endif %}
                                    <br>
                                    <span class="label">Organisme :</span>
                                    {{ AccesWan.idQuartier.Quartier }} - {{ AccesWan.idQuartier.idbaseDefense.baseDefense }} - {{  AccesWan.idQuartier.trigramme }}
                                    <br>
                                    <span class="label">type :</span>
                                        {% if AccesWan.typeOpera != '' %}
                                            {{ AccesWan.typeOpera }}
                                        {% else %}
                                            pas de type renseigné
                                        {% endif %}
                                    <br>
                                    <span class="label">date de début :</span>
                                    {{ AccesWan.dateDebut|date('d/m/Y') }}
                                    <br>
                                    <span class="label">date de fin :</span>
                                    {{ AccesWan.dateFin|date('d/m/Y') }}
                                </p>
                                <div class="collapse" id="collapseCard{{ AccesWan.idOpera }}">
                                    <p class="info">
                                        <span class="label">État :</span>
                                            {% if AccesWan.etatOpera == 1 %}
                                                Prévu
                                            {% else %}
                                                Traité
                                            {% endif %}
                                        <br>
                                        <span class="label">Commentaire :</span>
                                        <br>
                                        {{ AccesWan.commentaire }}
                                        <br>
                                        <span class="label">Commentaire :</span>
                                        <br>
                                    </p>
                                </div>
                            </div>
                            <button class="btn btn-outline-primary collapseBtn" type="button" data-bs-toggle="collapse" data-bs-target="#collapseCard{{ AccesWan.idOpera }}" aria-expanded="false" aria-controls="collapseCard">
                                Voir plus <i class="far fa-eye"></i>
                            </button>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <h3 class="title">Pas de {{ Sigle['accesWan'] }}</h3>
    {% endif %}

    <h1 class="title" id="internetMilitaire">{{ Sigle['internet_militaire'] }}</h1>

    {% if InternetMilitaires %}
        <div class="row">
            {% for InternetMilitaire in InternetMilitaires %}
                <div class="col-6" id="entity-{{ InternetMilitaire.idInternetMilitaire }}">
                    <div class="card">
                        <div class="card-body Entity-card">
                            <div class="card-content">
                                <h3 class="card-title">
                                    {{ InternetMilitaire.MasterId }}
                                    <div class="form-check" style="font-size: larger">
                                        <label for="checkbox{{ InternetMilitaire.idInternetMilitaire }}"></label>
                                        <input form="bnrFormDelete" class="form-check-input checkboxAffaire" name="idChecked{{ InternetMilitaire.idInternetMilitaire }}" type="checkbox" value="{{ InternetMilitaire.idInternetMilitaire }}" id="checkbox{{ InternetMilitaire.idInternetMilitaire }}">
                                    </div>
                                </h3>
                                <h4 class="card-subtitle mb-2 text-muted">
                                    {% if InternetMilitaire.debitInternetMilitaire != '' %}
                                        {{ InternetMilitaire.debitInternetMilitaire }}
                                    {% else %}
                                        Pas de débit renseigné
                                    {% endif %}
                                </h4>
                                <p class="card-text">
                                    <span class="label">Support :</span>
                                    {% if InternetMilitaire.idSupport %}
                                        {{ InternetMilitaire.idSupport.support }}
                                    {% else %}
                                        Pas de support
                                    {% endif %}
                                    <br>
                                    <span class="label">Ip lan subnet :</span>
                                    {{ InternetMilitaire.ipLanSubnet }}
                                    <br>
                                    <span class="label">Organisme :</span>
                                    {{ InternetMilitaire.idOrganisme.Organisme }} - {{ InternetMilitaire.idOrganisme.idQuartier.idbaseDefense.baseDefense }} - {{ InternetMilitaire.idOrganisme.idQuartier.trigramme }}
                                    <br>
                                    <span class="label">Ip Pfs :</span>
                                    {{ InternetMilitaire.ipPfs }}
                                    <br>
                                </p>
                                <div class="collapse" id="collapseCard{{ InternetMilitaire.idInternetMilitaire }}">
                                    <p class="info">
                                        <span class="label">État :</span>
                                        {% if InternetMilitaire.etatInternetMilitaire == 1 %}
                                            Prévu
                                        {% else %}
                                            Traité
                                        {% endif %}
                                        <br>
                                        <span class="label">Commentaire :</span>
                                        <br>
                                        {{ InternetMilitaire.commentaire }}
                                        <br>
                                    </p>
                                </div>
                            </div>
                            <button class="btn btn-outline-primary collapseBtn" type="button" data-bs-toggle="collapse" data-bs-target="#collapseCard{{ InternetMilitaire.idInternetMilitaire }}" aria-expanded="false" aria-controls="collapseCard">
                                Voir plus <i class="far fa-eye"></i>
                            </button>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <h3 class="title">Pas de {{ Sigle['internet_militaire'] }}</h3>
    {% endif %}

    <h1 class="title" id="Feb">Fiche Expression Besoin</h1>

    {% if Feb %}
        <div class="row">
            {% for Feb in Feb %}
                <div class="col-6" id="entity-{{ Feb.idFeb }}">
                    <div class="card">
                        <div class="card-body Entity-card">
                            <div class="card-content">
                                <h3 class="card-title">
                                    {{ Feb.intituleFeb }}
                                    <div class="form-check" style="font-size: larger">
                                        <label for="checkbox{{ Feb.idFeb }}"></label>
                                        <input form="bnrFormDelete" class="form-check-input checkboxAffaire" name="idChecked{{ Feb.idFeb }}" type="checkbox" value="{{ Feb.idFeb }}" id="checkbox{{ Feb.idFeb }}">
                                    </div>
                                </h3>
                                <h4 class="card-subtitle mb-2 text-muted">
                                    {% if Feb.numFeb != '' %}
                                        {{ Feb.numFeb }}
                                    {% else %}
                                        Pas de numéro Feb renseigné
                                    {% endif %}
                                </h4>
                                <p class="card-text">
                                    <span class="label">Support :</span>
                                    {% if Feb.montantFeb %}
                                        {{ Feb.montantFeb }}
                                    {% else %}
                                        Pas de montant
                                    {% endif %}
                                    <br>
                                    <span class="label">Pdc :</span>
                                    {{ Feb.idPdc.intitulePdc }}
                                    <br>
                                    <span class="label">Organisme :</span>
                                    {% for Organisme in Feb.idOrganisme %}
                                        {{ Organisme.organisme }}
                                    {% endfor %}
                                    <br>
                                    <span class="label">Dernière mise à jour :</span>
                                    {{ Feb.updateAt | date('d/m/Y') }}
                                    <br>
                                </p>
                                <div class="collapse" id="collapseCard{{ Feb.idFeb }}">
                                    <p class="info">
                                        <span class="label">Intitule Pdc:</span>
                                        {{ Feb.idPdc.intitulePdc }}
                                        <br>
                                        <span class="label">Montant Pdc:</span>
                                        {{ Feb.idPdc.montantPdc }}
                                        <br>
                                        <span class="label">Dernière mise à jour :</span>
                                        {{ Feb.idPdc.updateAt | date('d/m/y')}}
                                        <br>
                                        <span class="label">Statut du plan de charge :</span>
                                        {{ Feb.idPdc.idStatutPdc.statutPdc }}
                                        <br>
                                        <span class="label">Grand Compte :</span>
                                        {{ Feb.idPdc.idGrandsComptes.grandsComptes }}
                                        <br>
                                        <span class="label">Etat PDC :</span>
                                        {{ Feb.idPdc.idEtatPdc.etatPdc }}
                                        <br>
                                    </p>
                                </div>
                                <div class="collapse" id="collapseCard{{ Feb.idFeb }}2">
                                    <span class="label">Nom affaire</span>
                                    {% for Affaire in Affaire %}
                                        {% if Affaire.idFeb.idFeb == Feb.idFeb %}
                                            {{ Affaire.nomAffaire }}
                                            {{ Feb.idFeb }}
                                            <br>
                                        {% endif %}
                                    {% endfor %}
                                </div>
                            </div>
                            <button class="btn btn-outline-primary collapseBtn" type="button" data-bs-toggle="collapse" data-bs-target="#collapseCard{{ Feb.idFeb }}" aria-expanded="false" aria-controls="collapseCard">
                                Voir PDC <i class="far fa-eye"></i>
                            </button>
                            <button class="btn btn-outline-primary collapseBtn" type="button" data-bs-toggle="collapse" data-bs-target="#collapseCard{{ Feb.idFeb }}2" aria-expanded="false" aria-controls="collapseCard">
                                Voir les Affaires
                                <i class="far fa-eye"></i>
                            </button>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <h3 class="title">Pas de Fiche Expression Besoin</h3>
    {% endif %}

    <h1 class="title" id="Affaire">Affaires</h1>

    {% if Affaire %}
        <div class="row">
            {% for Affaire in Affaire %}
                <div class="col-6" id="entity-{{ Affaire.idAffaire }}">
                    <div class="card">
                        <div class="card-body Entity-card">
                            <div class="card-content">
                                <h3 class="card-title">
                                    {{ Affaire.nomAffaire }}
                                    <div class="form-check" style="font-size: larger">
                                        <label for="checkbox{{ Affaire.idAffaire }}"></label>
                                        <input form="bnrFormDelete" class="form-check-input checkboxAffaire" name="idChecked{{ Affaire.idAffaire }}" type="checkbox" value="{{ Affaire.idAffaire }}" id="checkbox{{ Affaire.idAffaire }}">
                                    </div>
                                </h3>
                                <h4 class="card-subtitle mb-2 text-muted">
                                    {{ Affaire.objectifAffaire }}
                                </h4>
                                <span class="label"> Nature affaire :</span>
                                {{ Affaire.idNatureAffaire.natureAffaire }}
                                <br>
                                <span class="label"> Priorisation :</span>
                                {{ Affaire.idPriorisation.priorisation }}
                                <br>
                                <span class="label">Montant affaire :</span>
                                {{ Affaire.montantAffaire }} euros
                                <br>
                                <span class="label">Echéance affaire :</span>
                                {{ Affaire.echeanceAffaire | date('d/m/y') }}
                                <br>
                                <span class="label">Commentaire :</span>
                                {{ Affaire.commentaire }}
                                <br>
                                <span class="label">Date de mise à jour :</span>
                                {{ Affaire.updateAt | date('d/m/y') }}
                                <br>
                                {% if Affaire.idNatureAffaire.natureAffaire == 'besoinNouveauReseau' or 'BNR' %}
                                <div class="collapse" id="collapseCard{{ Affaire.idAffaire }}">
                                    {% for Bnr in Bnr %}
                                        {% if Bnr.idAffaire.idAffaire == Affaire.idAffaire %}
                                            <span class="label">montant Info :</span>
                                            {% if Bnr.montantInfo %}
                                                {{ Bnr.montantInfo }}
                                            {% else %}
                                                pas de montant info renseigné
                                            {% endif %}
                                            <br>
                                            <span class="label">Date Demande :</span>
                                            {{ Bnr.dateDemande | date('d/m/y') }}
                                            <br>
                                            <span class="label">Impact : </span>
                                            {{ Bnr.impact }}
                                        {% endif %}
                                    {% endfor %}
                                {% endif %}
                                </div>
                            </div>
                            <button class="btn btn-outline-primary collapseBtn" type="button" data-bs-toggle="collapse" data-bs-target="#collapseCard{{ Affaire.idAffaire }}" aria-expanded="false" aria-controls="collapseCard">
                                Voir précisions BNR <i class="far fa-eye"></i>
                            </button>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <h3 class="title">Pas d'affaire en cours</h3>
    {% endif %}

{% endblock %}